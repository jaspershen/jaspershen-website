<!DOCTYPE html>
<!-- This site was created with Wowchemy. https://www.wowchemy.com -->
<!-- Last Published: August 10, 2023 --><html lang="en-us" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.7.0 for Hugo" />
  

  
  












  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Bruno+Ace&family=Limelight&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Bruno+Ace&family=Limelight&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" media="print" onload="this.media='all'">
    
  

  
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.047268c6dd09ad74ba54a0ba71837064.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.2/css/academicons.min.css" integrity="sha512-KlJCpRsLf+KKu2VQa5vmRuClRFjxc5lXO03ixZt82HZUk41+1I0bD8KBSA0fY290ayMfWYI9udIqeOWSu1/uZg==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.00f70589ff95c2db8722b74912195f3f.css" />

  
  
  

  
  
  
  
  
  
  
    
    
    <link rel="stylesheet" href="/css/libs/chroma/github-light.min.css" title="hl-light" media="print" onload="this.media='all'" >
    <link rel="stylesheet" href="/css/libs/chroma/dracula.min.css" title="hl-dark" media="print" onload="this.media='all'" disabled>
  

  
  


























  
  
  






  <meta name="author" content="Xiaotao Shen" />





  

<meta name="description" content="1 ç»˜å›¾åŸºç¡€(plot basics) 1.1 ggplot() åˆ›å»ºä¸€ä¸ªæ–°çš„ggplotå›¾ç‰‡ 1.1.1 å‚æ•° 1.1.2 ç»†èŠ‚ 1.1.3 ä¾‹å­ 1.2 aes() åˆ›å»ºç¾å­¦æ˜ å°„ 1.2.1 å‚æ•° 1.2.2 ç»†èŠ‚ 1.2.3 ä¾‹å­ 1.3 ggsave()ä¿å­˜ggplot2å›¾ç‰‡å¯¹è±¡ 1.3.1 å‚æ•° 2 å›¾å±‚(Layer):å‡ ä½•å¯¹è±¡(geoms) 2.1 ç›´çº¿geom_abline,geom_hlineå’Œgeom_vline 2." />



<link rel="alternate" hreflang="en-us" href="https://jaspershen.github.io/post/ggplot2-cookbook/" />
<link rel="canonical" href="https://jaspershen.github.io/post/ggplot2-cookbook/" />



  <link rel="manifest" href="/manifest.webmanifest" />



<link rel="icon" type="image/png" href="/media/icon_hu805a85e690e4f2727bf7d5f685d888f7_86836_32x32_fill_lanczos_center_3.png" />
<link rel="apple-touch-icon" type="image/png" href="/media/icon_hu805a85e690e4f2727bf7d5f685d888f7_86836_180x180_fill_lanczos_center_3.png" />

<meta name="theme-color" content="#007C48" />










  
  






<meta property="twitter:card" content="summary" />

  <meta property="twitter:site" content="@wowchemy" />
  <meta property="twitter:creator" content="@wowchemy" />
<meta property="twitter:image" content="https://jaspershen.github.io/media/icon_hu805a85e690e4f2727bf7d5f685d888f7_86836_512x512_fill_lanczos_center_3.png" />
<meta property="og:site_name" content="Xiaotao Shen" />
<meta property="og:url" content="https://jaspershen.github.io/post/ggplot2-cookbook/" />
<meta property="og:title" content="ggplot2 cookbook | Xiaotao Shen" />
<meta property="og:description" content="1 ç»˜å›¾åŸºç¡€(plot basics) 1.1 ggplot() åˆ›å»ºä¸€ä¸ªæ–°çš„ggplotå›¾ç‰‡ 1.1.1 å‚æ•° 1.1.2 ç»†èŠ‚ 1.1.3 ä¾‹å­ 1.2 aes() åˆ›å»ºç¾å­¦æ˜ å°„ 1.2.1 å‚æ•° 1.2.2 ç»†èŠ‚ 1.2.3 ä¾‹å­ 1.3 ggsave()ä¿å­˜ggplot2å›¾ç‰‡å¯¹è±¡ 1.3.1 å‚æ•° 2 å›¾å±‚(Layer):å‡ ä½•å¯¹è±¡(geoms) 2.1 ç›´çº¿geom_abline,geom_hlineå’Œgeom_vline 2." /><meta property="og:image" content="https://jaspershen.github.io/media/icon_hu805a85e690e4f2727bf7d5f685d888f7_86836_512x512_fill_lanczos_center_3.png" /><meta property="og:locale" content="en-us" />

  
    <meta
      property="article:published_time"
      content="2019-10-25T00:00:00&#43;00:00"
    />
  
  
    <meta property="article:modified_time" content="2019-10-25T00:00:00&#43;00:00">
  






    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jaspershen.github.io/post/ggplot2-cookbook/"
  },
  "headline": "ggplot2 cookbook",
  
  "datePublished": "2019-10-25T00:00:00Z",
  "dateModified": "2019-10-25T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Xiaotao Shen"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Xiaotao Shen",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jaspershen.github.io/media/icon_hu805a85e690e4f2727bf7d5f685d888f7_86836_192x192_fill_lanczos_center_3.png"
    }
  },
  "description": "1 ç»˜å›¾åŸºç¡€(plot basics) 1.1 ggplot() åˆ›å»ºä¸€ä¸ªæ–°çš„ggplotå›¾ç‰‡ 1.1.1 å‚æ•° 1.1.2 ç»†èŠ‚ 1.1.3 ä¾‹å­ 1.2 aes() åˆ›å»ºç¾å­¦æ˜ å°„ 1.2.1 å‚æ•° 1.2.2 ç»†èŠ‚ 1.2.3 ä¾‹å­ 1.3 ggsave()ä¿å­˜ggplot2å›¾ç‰‡å¯¹è±¡ 1.3.1 å‚æ•° 2 å›¾å±‚(Layer):å‡ ä½•å¯¹è±¡(geoms) 2.1 ç›´çº¿geom_abline,geom_hlineå’Œgeom_vline 2."
}
</script>

  

  




  
  
  

  
  

  


  
  <title>ggplot2 cookbook | Xiaotao Shen</title>

  
  
  
  











</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="997ed357d5a06e08724797e4becbb044" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.c51bb6301bb2be5edd35b3630c50ed3a.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header header--fixed">
  
  
  
  
  












<header>
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">Xiaotao Shen</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">Xiaotao Shen</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>ğŸ  About</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#posts"><span>ğŸ“– Posts</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#projects"><span>ğŸ’» Projects</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#talks"><span>ğŸ—£ï¸ Talks</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#featured"><span>ğŸ—ï¸ Publications</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#contact"><span>ğŸ“¥ Contact</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://twitter.com/GeorgeCushen" target="_blank" rel="noopener" aria-label="github">
                <i class="fab fa-github" aria-hidden="true"></i>
              </a>
            </li>
          
        

        
        
        
        <li class="nav-item">
          <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        
        <li class="nav-item dropdown theme-dropdown">
          <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
            <i class="fas fa-moon" aria-hidden="true"></i>
          </a>
          <div class="dropdown-menu">
            <a href="#" class="dropdown-item js-set-theme-light">
              <span>Light</span>
            </a>
            <a href="#" class="dropdown-item js-set-theme-dark">
              <span>Dark</span>
            </a>
            <a href="#" class="dropdown-item js-set-theme-auto">
              <span>Automatic</span>
            </a>
          </div>
        </li>
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    <article class="article">

  













  

  
  
  
<div class="article-container pt-3">
  <h1>ggplot2 cookbook</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Oct 25, 2019
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    11 min read
  </span>
  

  
  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/r/">R</a></span>
  

</div>

    





  
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="index_files/header-attrs/header-attrs.js"></script>

<div id="TOC">
<ul>
<li><a href="#ç»˜å›¾åŸºç¡€plot-basics"><span class="toc-section-number">1</span> ç»˜å›¾åŸºç¡€(plot basics)</a>
<ul>
<li><a href="#ggplot-åˆ›å»ºä¸€ä¸ªæ–°çš„ggplotå›¾ç‰‡"><span class="toc-section-number">1.1</span> <code>ggplot()</code> åˆ›å»ºä¸€ä¸ªæ–°çš„ggplotå›¾ç‰‡</a>
<ul>
<li><a href="#å‚æ•°"><span class="toc-section-number">1.1.1</span> å‚æ•°</a></li>
<li><a href="#ç»†èŠ‚"><span class="toc-section-number">1.1.2</span> ç»†èŠ‚</a></li>
<li><a href="#ä¾‹å­"><span class="toc-section-number">1.1.3</span> ä¾‹å­</a></li>
</ul></li>
<li><a href="#aes-åˆ›å»ºç¾å­¦æ˜ å°„"><span class="toc-section-number">1.2</span> <code>aes()</code> åˆ›å»ºç¾å­¦æ˜ å°„</a>
<ul>
<li><a href="#å‚æ•°-1"><span class="toc-section-number">1.2.1</span> å‚æ•°</a></li>
<li><a href="#ç»†èŠ‚-1"><span class="toc-section-number">1.2.2</span> ç»†èŠ‚</a></li>
<li><a href="#ä¾‹å­-1"><span class="toc-section-number">1.2.3</span> ä¾‹å­</a></li>
</ul></li>
<li><a href="#ggsaveä¿å­˜ggplot2å›¾ç‰‡å¯¹è±¡"><span class="toc-section-number">1.3</span> <code>ggsave()</code>ä¿å­˜<code>ggplot2</code>å›¾ç‰‡å¯¹è±¡</a>
<ul>
<li><a href="#å‚æ•°-2"><span class="toc-section-number">1.3.1</span> å‚æ•°</a></li>
</ul></li>
</ul></li>
<li><a href="#å›¾å±‚layerå‡ ä½•å¯¹è±¡geoms"><span class="toc-section-number">2</span> å›¾å±‚(Layer):å‡ ä½•å¯¹è±¡(geoms)</a>
<ul>
<li><a href="#ç›´çº¿geom_ablinegeom_hlineå’Œgeom_vline"><span class="toc-section-number">2.1</span> ç›´çº¿<code>geom_abline</code>,<code>geom_hline</code>å’Œ<code>geom_vline</code></a>
<ul>
<li><a href="#å‚æ•°-3"><span class="toc-section-number">2.1.1</span> å‚æ•°</a></li>
<li><a href="#ç»†èŠ‚-2"><span class="toc-section-number">2.1.2</span> ç»†èŠ‚</a></li>
<li><a href="#ç¾å­¦æ˜ å°„aesthetics"><span class="toc-section-number">2.1.3</span> ç¾å­¦æ˜ å°„(Aesthetics)</a></li>
<li><a href="#ä¾‹å­-2"><span class="toc-section-number">2.1.4</span> ä¾‹å­</a></li>
</ul></li>
<li><a href="#æŸ±å½¢å›¾bar-chartsgeom_bargeom_colå’Œstat_count"><span class="toc-section-number">2.2</span> æŸ±å½¢å›¾(bar charts)<code>geom_bar()</code>,<code>geom_col()</code>å’Œ<code>stat_count</code></a>
<ul>
<li><a href="#å‚æ•°-4"><span class="toc-section-number">2.2.1</span> å‚æ•°</a></li>
<li><a href="#ç»†èŠ‚-3"><span class="toc-section-number">2.2.2</span> ç»†èŠ‚</a></li>
<li><a href="#ç¾å­¦å‚æ•°aesthetics"><span class="toc-section-number">2.2.3</span> ç¾å­¦å‚æ•°(Aesthetics)</a></li>
<li><a href="#è®¡ç®—å˜é‡-computed-variables"><span class="toc-section-number">2.2.4</span> è®¡ç®—å˜é‡ (Computed variables)</a></li>
<li><a href="#ä¾‹å­-3"><span class="toc-section-number">2.2.5</span> ä¾‹å­</a></li>
</ul></li>
<li><a href="#äºŒç»´æ–¹æ ¼è®¡æ•°çƒ­å›¾heatmap-of-2d-bin-countsgeom_bin2då’Œstat_bin_2d"><span class="toc-section-number">2.3</span> äºŒç»´æ–¹æ ¼è®¡æ•°çƒ­å›¾(Heatmap of 2d bin counts)<code>geom_bin2d()</code>å’Œ<code>stat_bin_2d()</code></a>
<ul>
<li><a href="#å‚æ•°-5"><span class="toc-section-number">2.3.1</span> å‚æ•°</a></li>
<li><a href="#ç¾å­¦å‚æ•°asethetics"><span class="toc-section-number">2.3.2</span> ç¾å­¦å‚æ•°(Asethetics)</a></li>
<li><a href="#è®¡ç®—å˜é‡computed-variables"><span class="toc-section-number">2.3.3</span> è®¡ç®—å˜é‡(Computed variables)</a></li>
<li><a href="#ä¾‹å­-4"><span class="toc-section-number">2.3.4</span> ä¾‹å­</a></li>
</ul></li>
<li><a href="#ç©ºç™½å›¾geom_blank"><span class="toc-section-number">2.4</span> ç©ºç™½å›¾<code>geom_blank()</code></a>
<ul>
<li><a href="#å‚æ•°-6"><span class="toc-section-number">2.4.1</span> å‚æ•°</a></li>
<li><a href="#ä¾‹å­-5"><span class="toc-section-number">2.4.2</span> ä¾‹å­</a></li>
</ul></li>
<li><a href="#ç®±å‹å›¾boxplotæˆ–è€…whiskers-plotgeom_boxplotå’Œstat_boxplot"><span class="toc-section-number">2.5</span> ç®±å‹å›¾(boxplotæˆ–è€…whiskers plot)<code>geom_boxplot()</code>å’Œ<code>stat_boxplot()</code></a>
<ul>
<li><a href="#å‚æ•°-7"><span class="toc-section-number">2.5.1</span> å‚æ•°</a></li>
<li><a href="#ç»Ÿè®¡æ€»ç»“"><span class="toc-section-number">2.5.2</span> ç»Ÿè®¡æ€»ç»“</a></li>
<li><a href="#ç¾å­¦å‚æ•°"><span class="toc-section-number">2.5.3</span> ç¾å­¦å‚æ•°</a></li>
<li><a href="#è®¡ç®—å˜é‡"><span class="toc-section-number">2.5.4</span> è®¡ç®—å˜é‡</a></li>
<li><a href="#ä¾‹å­-6"><span class="toc-section-number">2.5.5</span> ä¾‹å­</a></li>
</ul></li>
<li><a href="#dè¡¨é¢çš„2dç­‰é«˜çº¿contoursgeom_contourå’Œstat_contour"><span class="toc-section-number">2.6</span> 3Dè¡¨é¢çš„2Dç­‰é«˜çº¿(contours)<code>geom_contour()</code>å’Œ<code>stat_contour()</code></a>
<ul>
<li><a href="#å‚æ•°-8"><span class="toc-section-number">2.6.1</span> å‚æ•°</a></li>
<li><a href="#ç¾å­¦å‚æ•°-1"><span class="toc-section-number">2.6.2</span> ç¾å­¦å‚æ•°</a></li>
<li><a href="#è®¡ç®—å˜é‡-1"><span class="toc-section-number">2.6.3</span> è®¡ç®—å˜é‡</a></li>
<li><a href="#ä¾‹å­-7"><span class="toc-section-number">2.6.4</span> ä¾‹å­</a></li>
</ul></li>
</ul></li>
<li><a href="#å¸¸è§é—®é¢˜æ€»ç»“"><span class="toc-section-number">3</span> å¸¸è§é—®é¢˜æ€»ç»“</a>
<ul>
<li><a href="#å¦‚ä½•ä¿è¯ä¸åŒå›¾ä¸­legendçš„scaleä¸€è‡´"><span class="toc-section-number">3.1</span> å¦‚ä½•ä¿è¯ä¸åŒå›¾ä¸­legendçš„scaleä¸€è‡´</a></li>
</ul></li>
</ul>
</div>

<div id="ç»˜å›¾åŸºç¡€plot-basics" class="section level1" number="1">
<h1><span class="header-section-number">1</span> ç»˜å›¾åŸºç¡€(plot basics)</h1>
<p>æ‰€æœ‰çš„ggplot2å›¾å½¢éƒ½å¼€å§‹äº<code>ggplot()</code>å‡½æ•°çš„è°ƒç”¨.ç»™å…¶æä¾›æ•°æ®,ä»¥åŠç¾å­¦æ˜ å°„(aesthethic mappings)(ä½¿ç”¨<code>aes()</code>å‡½æ•°).ç„¶åæ·»åŠ å›¾å±‚(layers), åº¦é‡ç³»ç»Ÿ(scales), åæ ‡ç³»(coords)ä»¥åŠåˆ†é¢(facets).æ·»åŠ çš„æ¯ä¸ªå¯¹è±¡,éƒ½æ˜¯åœ¨å‰ä¸€è¡Œæœ«å°¾ä½¿ç”¨ç¬¦å·<code>+</code>.å¦‚æœéœ€è¦å°†ä¸€ä¸ªggplot2å›¾åƒä¿å­˜åœ¨æœ¬åœ°,ä½¿ç”¨<code>ggsave()</code>å‡½æ•°.</p>
<div id="ggplot-åˆ›å»ºä¸€ä¸ªæ–°çš„ggplotå›¾ç‰‡" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> <code>ggplot()</code> åˆ›å»ºä¸€ä¸ªæ–°çš„ggplotå›¾ç‰‡</h2>
<p><code>ggplot()</code>å‡½æ•°æ˜¯ç”¨æ¥å¯åŠ¨åˆå§‹åŒ–ä¸€ä¸ªggplot2å¯¹è±¡çš„.It can be used to declare the input data frame for a graphic and to specify the set of plot aesthetics intended to be common throughout all subsequent layers unless specifically overridden.</p>
<pre><code>ggplot(data = NULL, mapping = aes(), ...,
  environment = parent.frame())
Arguments</code></pre>
<div id="å‚æ•°" class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> å‚æ•°</h3>
<ul>
<li><p><strong>data</strong> ç”¨äºç»˜å›¾çš„æ•°æ®.å¦‚æœæ•°æ®æ ¼å¼ä¸æ˜¯<code>data.frame</code>,ä¼šé»˜è®¤ä½¿ç”¨<code>fortity()</code>å‡½æ•°è½¬æ¢ä¸º<code>data.frame</code>æ ¼å¼.å¦‚æœåœ¨è¯¥å‡½æ•°ä¸­ä¸æä¾›data,åˆ™åœ¨åé¢æ·»åŠ çš„æ¯ä¸€ä¸ªå›¾å±‚,éƒ½éœ€è¦æä¾›data.</p></li>
<li><p><strong>mapping</strong> ç”¨äºç¾å­¦å›¾å±‚æ˜ å°„çš„å‚æ•°.å¦‚æœåœ¨è¿™é‡Œä¸æä¾›,åˆ™åé¢æ·»åŠ çš„æ¯ä¸ªå›¾å±‚,éƒ½éœ€è¦æä¾›.</p></li>
<li><p><strong>â€¦</strong> å…¶ä»–å¯ç”¨äºè¯¥å‡½æ•°çš„å‚æ•°.</p></li>
<li><p><strong>environment</strong> è¯¥å‚æ•°å·²ç»æ·˜æ±°äº†.</p></li>
</ul>
</div>
<div id="ç»†èŠ‚" class="section level3" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> ç»†èŠ‚</h3>
<p><code>ggplot()</code>ç”¨æ¥åˆå§‹åŒ–ggplot2å›¾å½¢å¯¹è±¡.ç»å¸¸åé¢éœ€è¦é€šè¿‡<code>+</code>æ¥æ·»åŠ å…¶ä»–çš„å¯¹è±¡.ä¸€èˆ¬æœ‰ä¸‰ç§æ–¹æ³•è°ƒç”¨è¯¥å‡½æ•°:</p>
<ul>
<li><p><code>ggplot(df, aes(x, y, other aesthetics))</code></p></li>
<li><p><code>ggplot(df)</code></p></li>
<li><p><code>ggplot2</code></p></li>
</ul>
<p>å¦‚æœåé¢çš„æ‰€æœ‰å›¾å±‚ä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€å¥—æ•°æ®ä»¥åŠç¾å­¦æ˜ å°„,åˆ™æ¨èä½¿ç”¨ç¬¬ä¸€ç§ç”¨æ³•.å¦‚æœåé¢å›¾å±‚ä½¿ç”¨æ•°æ®ä¸€è‡´,ä½†æ˜¯ç¾å­¦æ˜ å°„ä¸åŒ,åˆ™æ¨èä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•.å¦‚æœæ¯ä¸€ä¸ªå›¾å±‚ä½¿ç”¨çš„æ•°æ®å’Œç¾å­¦æ˜ å°„éƒ½ä¸ç›¸åŒ,åˆ™ä½¿ç”¨ç¬¬ä¸‰ç§æ–¹æ³•,ä¸€èˆ¬ç”¨æ¥æ„å»ºæ¯”è¾ƒå¤æ‚çš„å›¾å½¢.</p>
</div>
<div id="ä¾‹å­" class="section level3" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> ä¾‹å­</h3>
<pre class="r"><code>library(ggplot2)
# äº§ç”Ÿéšæœºæ•°æ®,ç„¶åè®¡ç®—å¹³å‡å€¼å’Œæ ‡å‡†å·®
df &lt;- data.frame(
  gp = factor(rep(letters[1:3], each = 10)),
  y = rnorm(30)
)
ds &lt;- do.call(rbind, lapply(split(df, df$gp), function(d) {
  data.frame(mean = mean(d$y), sd = sd(d$y), gp = d$gp)
}))

ggplot(df, aes(gp, y)) +
  geom_point() +
  geom_point(data = ds, aes(y = mean), colour = &#39;red&#39;, size = 3)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<pre class="r"><code>#æ³¨æ„,ç¬¬ä¸€ä¸ªgeom_pointå›¾å±‚ä½¿ç”¨çš„æ˜¯ggplotä¸­çš„æ•°æ®å’Œç¾å­¦æ˜ å°„.è€Œç¬¬äºŒä¸ªgeom_point
#å›¾å±‚ä¸­ä½¿ç”¨çš„åˆ™æ˜¯ä¸åŒçš„æ•°æ®å’Œç¾å­¦æ˜ å°„.

# è€Œä¸‹é¢è¿™å¹…å›¾,ç¬¬ä¸€ä¸ªgeonm_pointå›¾å±‚å› ä¸ºæ²¡æœ‰æä¾›data,å› æ­¤ä½¿ç”¨çš„æ˜¯ggplot()ä¸­çš„data,
#è€Œç¾å­¦æ˜ å°„åˆ™æ˜¯è‡ªå·±å®šä¹‰çš„.

ggplot(df) +
  geom_point(aes(gp, y)) +
  geom_point(data = ds, aes(gp, mean), colour = &#39;red&#39;, size = 3)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-1-2.png" width="672" /></p>
<pre class="r"><code># å¦å¤–ä¸€ä¸ªé€‰æ‹©åˆ™æ˜¯å®Œå…¨ä¸åœ¨ggplotä¸­å®šä¹‰æ•°æ®å’Œç¾å­¦æ˜ å°„,è€Œæ˜¯åœ¨æ¯ä¸€ä¸ªå›¾å±‚ä¸­åˆ†åˆ«å®šä¹‰.
# å½“ä½ è¦ç”»å¤æ‚å›¾å½¢çš„æ—¶å€™,è¿™ç§æ–¹æ³•å°±ä¼šæ˜¾ç¤ºçš„éå¸¸æ¸…æ™°å’Œæ˜äº†.
ggplot() +
  geom_point(data = df, aes(gp, y)) +
  geom_point(data = ds, aes(gp, mean), colour = &#39;red&#39;, size = 3) +
  geom_errorbar(
    data = ds,
    aes(gp, mean, ymin = mean - sd, ymax = mean + sd),
    colour = &#39;red&#39;,
    width = 0.4
  )</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-1-3.png" width="672" /></p>
</div>
</div>
<div id="aes-åˆ›å»ºç¾å­¦æ˜ å°„" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> <code>aes()</code> åˆ›å»ºç¾å­¦æ˜ å°„</h2>
<p>ç¾å­¦æ˜ å°„æŒ‡çš„æ˜¯æ•°æ®ä¸­çš„å˜é‡å¦‚ä½•æ˜ å°„åˆ°å›¾å½¢çš„è§†è§‰ç‰¹æ€§ä¸Š(ä¹Ÿå°±æ˜¯ç¾å­¦aesthetics).ç¾å­¦æ˜ å°„å¯ä»¥åœ¨<code>ggplot()</code>å‡½æ•°ä»¥åŠæ¯ä¸€ä¸ªå•ç‹¬çš„å›¾å±‚ä¸­è¿›è¡Œè®¾ç½®.</p>
<p><code>aes(x, y, ...)</code></p>
<div id="å‚æ•°-1" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> å‚æ•°</h3>
<ul>
<li><strong>x, y, â€¦</strong> å°†å˜é‡æ˜ å°„åˆ°å›¾å½¢çš„è§†è§‰ç‰¹æ€§çš„åå­—.xå’Œyåˆ†åˆ«æŒ‡xè½´å’Œyè½´.é€šå¸¸ä»–ä»¬å¯ä»¥çœç•¥ä¸å†™.ä½†æ˜¯å…¶ä»–çš„,å¦‚é¢œè‰²(colour/color),å¡«å……é¢œè‰²(fill),å¤§å°(size)ç­‰åˆ™å¿…é¡»å†™æ˜å‚æ•°åå­—.</li>
</ul>
</div>
<div id="ç»†èŠ‚-1" class="section level3" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> ç»†èŠ‚</h3>
<p>æ³¨æ„çš„æ˜¯,åœ¨ggplot2ç§,å¯¹äºè§†è§‰ç‰¹å¾çš„åå­—è¿›è¡Œäº†è§„èŒƒåŒ–,å› æ­¤å’ŒR baseç»˜å›¾å‡½æ•°ç§çš„å¹¶ä¸ç›¸åŒ,æ¯”å¦‚ä»<code>pch</code>æ”¹ä¸º<code>shape</code>,ä»<code>cex</code>æ”¹ä¸º<code>size</code>.</p>
</div>
<div id="ä¾‹å­-1" class="section level3" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> ä¾‹å­</h3>
<pre class="r"><code>aes(x = mpg, y = wt)</code></pre>
<pre><code>## Aesthetic mapping: 
## * `x` -&gt; `mpg`
## * `y` -&gt; `wt`</code></pre>
<pre class="r"><code>#&gt; Aesthetic mapping: 
#&gt; * `x` -&gt; `mpg`
#&gt; * `y` -&gt; `wt`
aes(mpg, wt)</code></pre>
<pre><code>## Aesthetic mapping: 
## * `x` -&gt; `mpg`
## * `y` -&gt; `wt`</code></pre>
<pre class="r"><code>#&gt; Aesthetic mapping: 
#&gt; * `x` -&gt; `mpg`
#&gt; * `y` -&gt; `wt`

# You can also map aesthetics to functions of variables
aes(x = mpg ^ 2, y = wt / cyl)</code></pre>
<pre><code>## Aesthetic mapping: 
## * `x` -&gt; `mpg^2`
## * `y` -&gt; `wt/cyl`</code></pre>
<pre class="r"><code>#&gt; Aesthetic mapping: 
#&gt; * `x` -&gt; `mpg^2`
#&gt; * `y` -&gt; `wt/cyl`

# Or to constants
aes(x = 1, colour = &quot;smooth&quot;)</code></pre>
<pre><code>## Aesthetic mapping: 
## * `x`      -&gt; 1
## * `colour` -&gt; &quot;smooth&quot;</code></pre>
<pre class="r"><code>#&gt; Aesthetic mapping: 
#&gt; * `x`      -&gt; 1
#&gt; * `colour` -&gt; &quot;smooth&quot;

# Aesthetic names are automatically standardised
aes(col = x)</code></pre>
<pre><code>## Aesthetic mapping: 
## * `colour` -&gt; `x`</code></pre>
<pre class="r"><code>#&gt; Aesthetic mapping: 
#&gt; * `colour` -&gt; `x`
aes(fg = x)</code></pre>
<pre><code>## Aesthetic mapping: 
## * `colour` -&gt; `x`</code></pre>
<pre class="r"><code>#&gt; Aesthetic mapping: 
#&gt; * `colour` -&gt; `x`
aes(color = x)</code></pre>
<pre><code>## Aesthetic mapping: 
## * `colour` -&gt; `x`</code></pre>
<pre class="r"><code>#&gt; Aesthetic mapping: 
#&gt; * `colour` -&gt; `x`
aes(colour = x)</code></pre>
<pre><code>## Aesthetic mapping: 
## * `colour` -&gt; `x`</code></pre>
<pre class="r"><code>#&gt; Aesthetic mapping: 
#&gt; * `colour` -&gt; `x`

# aes() is passed to either ggplot() or specific layer. Aesthetics supplied
# to ggplot() are used as defaults for every layer.
ggplot(mpg, aes(displ, hwy)) + geom_point()</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<pre class="r"><code>ggplot(mpg) + geom_point(aes(displ, hwy))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-2-2.png" width="672" /></p>
<pre class="r"><code># Tidy evaluation ----------------------------------------------------
# aes() automatically quotes all its arguments, so you need to use tidy
# evaluation to create wrappers around ggplot2 pipelines. The
# simplest case occurs when your wrapper takes dots:
scatter_by &lt;- function(data, ...) {
  ggplot(data) + geom_point(aes(...))
}
scatter_by(mtcars, disp, drat)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-2-3.png" width="672" /></p>
<pre class="r"><code># If your wrapper has a more specific interface with named arguments,
# you need &quot;enquote and unquote&quot;:
scatter_by &lt;- function(data, x, y) {
  x &lt;- enquo(x)
  y &lt;- enquo(y)

  ggplot(data) + geom_point(aes(!!x, !!y))
}
scatter_by(mtcars, disp, drat)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-2-4.png" width="672" /></p>
<pre class="r"><code># Note that users of your wrapper can use their own functions in the
# quoted expressions and all will resolve as it should!
cut3 &lt;- function(x) cut_number(x, 3)
scatter_by(mtcars, cut3(disp), drat)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-2-5.png" width="672" /></p>
</div>
</div>
<div id="ggsaveä¿å­˜ggplot2å›¾ç‰‡å¯¹è±¡" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> <code>ggsave()</code>ä¿å­˜<code>ggplot2</code>å›¾ç‰‡å¯¹è±¡</h2>
<p><code>ggsave()</code>é»˜è®¤ä¼šä¿å­˜å½“å‰æœ€åä¸€å¹…<code>ggplot2</code>å›¾ç‰‡.å¦‚æœä¸è®¾ç½®å°ºå¯¸,åˆ™ä½¿ç”¨å½“å‰è®¾å¤‡å°ºå¯¸.</p>
<pre><code>ggsave(filename, plot = last_plot(), device = NULL, path = NULL,
  scale = 1, width = NA, height = NA, units = c(&quot;in&quot;, &quot;cm&quot;, &quot;mm&quot;),
  dpi = 300, limitsize = TRUE, ...)</code></pre>
<div id="å‚æ•°-2" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> å‚æ•°</h3>
<ul>
<li><p><strong>filename</strong> è¦ä¿å­˜çš„å›¾ç‰‡çš„åå­—,æ³¨æ„ä¸åŒ…æ‹¬åç¼€å.</p></li>
<li><p><strong>plot</strong> è¦ä¿å­˜çš„<code>ggplot2</code>å›¾ç‰‡.</p></li>
<li><p><strong>device</strong> è¦ä¿å­˜çš„å›¾ç‰‡çš„ç±»å‹.åŒ…æ‹¬ä»¥ä¸‹:â€œepsâ€, â€œpsâ€, â€œtexâ€ (pictex), â€œpdfâ€, â€œjpegâ€, â€œtiffâ€, â€œpngâ€, â€œbmpâ€, â€œsvgâ€ or â€œwmfâ€ (windows only).</p></li>
<li><p><strong>path</strong> å›¾ç‰‡æ‰€è¦ä¿å­˜çš„è·¯å¾„.</p></li>
<li><p><strong>scale</strong> Multiplicative scaling factor.æš‚æ—¶ä¸çŸ¥é“ä»€ä¹ˆæ„æ€?</p></li>
<li><p><strong>width, height, units</strong> è¦ä¿å­˜å›¾ç‰‡çš„å®½å’Œé«˜,ä»¥åŠå…¶å•ä½.å•ä½åŒ…æ‹¬:â€œinâ€(è‹±å¯¸), â€œcmâ€, or â€œmmâ€.</p></li>
<li><p><strong>dpi</strong> å›¾ç‰‡åˆ†è¾¨ç‡.ä¸€èˆ¬æ˜¯æ•°å­—.ä¹Ÿå¯ä»¥ä½¿ç”¨æ–‡å­—ç¬¦:â€œretinaâ€ (320), â€œprintâ€ (300), or â€œscreenâ€ (72).</p></li>
<li><p><strong>limitsize</strong> å¦‚æœè®¾ç½®ä¸ºTRUE,åˆ™<code>ggsave</code>ä¸ä¼šä¿å­˜å°ºå¯¸å¤§äº50Ã—50 inchçš„å›¾ç‰‡.</p></li>
<li><p><strong>â€¦</strong> å…¶ä»–å¯ä»¥ç”¨äºå›¾å½¢è®¾å¤‡(graphics device function)çš„å‚æ•°.</p></li>
</ul>
</div>
</div>
</div>
<div id="å›¾å±‚layerå‡ ä½•å¯¹è±¡geoms" class="section level1" number="2">
<h1><span class="header-section-number">2</span> å›¾å±‚(Layer):å‡ ä½•å¯¹è±¡(geoms)</h1>
<p>ä¸€ä¸ªå›¾å±‚åŒ…æ‹¬äº†æ•°æ®(data),ç¾å­¦æ˜ å°„(aesthetic mapping),å‡ ä½•å¯¹è±¡(geometric object),ç»Ÿè®¡è½¬æ¢(statistical transformation),ä»¥åŠä½ç½®è°ƒæ•´(position adjustment).ä¸€èˆ¬æ¥è¯´,åº”è¯¥ä½¿ç”¨<code>geom_xxx()</code>å‡½æ•°æ¥åˆ›å»ºå›¾å±‚.å¿…è¦æƒ…å†µä¸‹,éœ€è¦æ‰‹åŠ¨è®¾ç½®å»è¦†ç›–é»˜è®¤çš„ä½ç½®å’Œç»Ÿè®¡è½¬æ¢.</p>
<div id="ç›´çº¿geom_ablinegeom_hlineå’Œgeom_vline" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> ç›´çº¿<code>geom_abline</code>,<code>geom_hline</code>å’Œ<code>geom_vline</code></h2>
<p>è¿™ä¸‰ä¸ªå‡½æ•°(å‡ ä½•å¯¹è±¡)åˆ†åˆ«ç”¨æ¥ç”»å¯¹è§’çº¿,æ°´å¹³å’Œå‚ç›´ç›´çº¿.</p>
<pre><code>geom_abline(mapping = NULL, data = NULL, ..., slope, intercept,
  na.rm = FALSE, show.legend = NA)

geom_hline(mapping = NULL, data = NULL, ..., yintercept,
  na.rm = FALSE, show.legend = NA)

geom_vline(mapping = NULL, data = NULL, ..., xintercept,
  na.rm = FALSE, show.legend = NA)</code></pre>
<div id="å‚æ•°-3" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> å‚æ•°</h3>
<ul>
<li><p><strong>mapping</strong> ç¾å­¦æ˜ å°„,ä½¿ç”¨<code>aes()</code>å‡½æ•°è®¾ç½®.</p></li>
<li><p><strong>data</strong> ç”¨äºåˆ›å»ºè¯¥å›¾å±‚çš„æ•°æ®.æœ‰ä¸‰ç§é€‰æ‹©: 1)å¦‚æœè®¾ç½®ä¸º<code>NULL</code>,ä¹Ÿæ˜¯é»˜è®¤è®¾ç½®.åˆ™è¯¥æ•°æ®ç»§æ‰¿è‡ª<code>ggplot()</code>å‡½æ•°ä¸­çš„æ•°æ®.2)ä¸€ä¸ª<code>data.frame</code>,æˆ–è€…å…¶ä»–çš„å¯¹è±¡,å¦‚<code>tibble</code>,è¿™å°†ä¼šè¦†ç›–<code>ggplot()</code>ä¸­çš„æ•°æ®.3)ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª<code>function()</code>,ä½†æ˜¯è¯¥functionæœ€åè¿”å›çš„å¯¹è±¡åº”è¯¥æ˜¯<code>data.frame</code>.<code>function</code>å¯ä»¥ä½¿ç”¨<code>formula</code>æ ¼å¼è¿›è¡Œåˆ›å»º,å¦‚:<code>head(.x, 10)</code></p></li>
<li><p><strong>â€¦</strong> å…¶ä»–çš„å¯ä»¥ä¼ å…¥<code>layer()</code>çš„å‚æ•°.ä¸€èˆ¬æ˜¯ç¾å­¦å¯¹è±¡,å¦‚<code>colour = "red"</code>æˆ–è€…<code>size = 3</code>.ä¹Ÿå¯ä»¥æ˜¯ä¸€äº›ä¸€äº›èƒ½å¤Ÿä¼ å…¥åˆ°å’Œ<code>geom_</code>é…å¯¹çš„geom/statçš„å‚æ•°.</p></li>
<li><p><strong>na.rm</strong> é»˜è®¤ä¸º<code>FALSE</code>, missing valueä¼šè¢«å»é™¤æ‰,ä½†æ˜¯ä¼šç»™å‡º<code>warning</code>,å¦‚æœè®¾ç½®ä¸º<code>TRUE</code>,missing valueä¹Ÿä¼šè¢«å»é™¤æ‰,ä½†æ˜¯ä¸ä¼šç»™<code>warning</code>.</p></li>
<li><p><strong>show.legend</strong> è¯¥å›¾å±‚æ˜¯å¦è¦æ˜¾ç¤ºåœ¨legendä¸Š.é»˜è®¤ä¸º<code>NA</code>,åˆ™è¯¥å›¾å±‚ä¸­æ‰€æœ‰çš„æ˜ å°„åˆ°å›¾å½¢å±æ€§çš„å˜é‡éƒ½ä¼šæ˜¾ç¤ºåœ¨legendä¸­.<code>FALSE</code>åˆ™æ°¸è¿œä¸æ˜¾ç¤º,<code>TRUE</code>åˆ™æ°¸è¿œæ˜¾ç¤º.å¦‚æœè¯¥å›¾å½¢æœ‰å¤šä¸ªå˜é‡æ˜ å°„åˆ°ä¸åŒçš„å›¾å½¢å±æ€§,åˆ™å¯ä»¥å°†å…¶è®¾ç½®ä¸ºä¸€ä¸ªvector,åˆ†åˆ«æ§åˆ¶ä¸åŒçš„å˜é‡æ˜¯å¦æ˜¾ç¤º.</p></li>
<li><p><strong>xintercept/yintercept/slope/intercept</strong> æ§åˆ¶ç›´çº¿çš„ä½ç½®å‚æ•°.å¦‚æœè¿™äº›è®¾ç½®äº†,åˆ™<code>data</code>,<code>mapping</code>å’Œ<code>show.legend</code>åˆ™ä¼šè¢«è¦†ç›–æ‰.</p></li>
</ul>
</div>
<div id="ç»†èŠ‚-2" class="section level3" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> ç»†èŠ‚</h3>
<p>è¿™äº›å‡ ä½•å¯¹è±¡å’Œå…¶ä»–çš„å‡ ä½•å¯¹è±¡ç¨å¾®æœ‰äº›ä¸åŒ.å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹æ³•æä¾›å‚æ•°:1)ç»™layerå‡½æ•°æä¾›å‚æ•°,æˆ–è€…2)é€šè¿‡ç¾å­¦å¯¹è±¡æä¾›å‚æ•°.å¦‚æœä½ ä½¿ç”¨å‚æ•°,ä¾‹å¦‚<code>geom_abline(intercept = 0, slope = 1)</code>,ç„¶åå‡ ä½•å¯¹è±¡(<code>geom_</code>)ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„data frame,è¿™ä¸ªdata rameåªåŒ…æ‹¬äº†ä½ æ‰€æä¾›çš„æ•°æ®.è¿™æ„å‘³ç€åœ¨æ‰€æœ‰çš„åˆ†é¢ä¸­,ç›´çº¿éƒ½æ˜¯ç›¸åŒçš„.å¦‚æœä½ æƒ³åœ¨ä¸åŒçš„åˆ†é¢ä¸­,ç›´çº¿ä¸ç›¸åŒ,ä½ éœ€è¦è‡ªå·±åˆ›å»ºä¸€ä¸ªdata frame,ç„¶åå†ç¾å­¦æ˜ å°„(aesthetics)ä¸­è®¾ç½®.</p>
<p>ä¸å…¶ä»–çš„å‡ ä½•å¯¹è±¡ä¸åŒ,è¿™äº›å‡ ä½•å¯¹è±¡ä¸ä¼šä»<code>ggplot</code>ä¸­ç»§æ‰¿data.ä»–ä»¬ä¹Ÿä¸ä¼šå½±å“åˆ°xå’Œyçš„scale.</p>
</div>
<div id="ç¾å­¦æ˜ å°„aesthetics" class="section level3" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> ç¾å­¦æ˜ å°„(Aesthetics)</h3>
<p>è¿™ä¸‰ä¸ªå‡ ä½•å¯¹è±¡(geom)å…¶å®éƒ½æ˜¯ä½¿ç”¨<code>geom_line()</code>å‡½æ•°æ¥ç”»ç›´çº¿çš„,å› æ­¤ä»–ä»¬éƒ½æ”¯æŒ<code>geom_line()</code>çš„ç¾å­¦å‚æ•°,å¦‚<code>alpha</code>,<code>colour</code>,<code>linetype</code>å’Œ<code>size</code>.å¯¹äºæ¯ä¸ªå‡ ä½•å¯¹è±¡éƒ½æœ‰,éƒ½æœ‰å•ç‹¬çš„å‚æ•°ç”¨æ¥æ§åˆ¶ç›´çº¿çš„ä½ç½®:</p>
<ul>
<li><p><code>geom_vline</code>:<code>xintercept</code>.</p></li>
<li><p><code>geom_hline</code>:<code>yintercept</code>.</p></li>
<li><p><code>geom_vline</code>:<code>slope</code>(æ–œç‡)å’Œ<code>intercept</code>(æˆªè·).</p></li>
</ul>
</div>
<div id="ä¾‹å­-2" class="section level3" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> ä¾‹å­</h3>
<pre class="r"><code>library(ggplot2)
p &lt;- 
  ggplot(mtcars, aes(wt, mpg)) + 
  geom_point()

# æ·»åŠ å‚ç›´ç›´çº¿
p + 
  geom_vline(xintercept = 5)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code>p + 
  geom_vline(xintercept = 1:5)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-3-2.png" width="672" /></p>
<pre class="r"><code># æ·»åŠ æ°´å¹³ç›´çº¿
p + 
  geom_hline(yintercept = 20)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-3-3.png" width="672" /></p>
<pre class="r"><code># æ·»åŠ å¯¹è§’çº¿,é»˜è®¤æ–œç‡ä¸º1
p + 
  geom_abline(intercept = 20)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-3-4.png" width="672" /></p>
<pre class="r"><code># è®¡ç®—ç›´çº¿å›å½’çš„æ–œç‡å’Œæˆªè·
coef(lm(mpg ~ wt, data = mtcars))</code></pre>
<pre><code>## (Intercept)          wt 
##   37.285126   -5.344472</code></pre>
<pre class="r"><code>p + 
  geom_abline(intercept = 37, slope = -5)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-3-5.png" width="672" /></p>
<pre class="r"><code># ä½†æ˜¯ä½¿ç”¨geom_smoothæ›´åŠ ç®€å•h:
p + 
  geom_smooth(method = &quot;lm&quot;, se = FALSE)</code></pre>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-3-6.png" width="672" /></p>
<pre class="r"><code># å¦‚æœæƒ³è¦å†ä¸åŒåˆ†é¢æ˜¾ç¤ºä¸åŒçš„ç›´çº¿,åˆ™ä½¿ç”¨ç¾å­¦å¯¹è±¡,ä¹Ÿå°±æ˜¯éœ€è¦è‡ªå·±åˆ›å»º
p &lt;- ggplot(mtcars, aes(mpg, wt)) +
  geom_point() +
  facet_wrap(~ cyl)

mean_wt &lt;- 
  data.frame(cyl = c(4, 6, 8), wt = c(2.28, 3.11, 4.00))
mean_wt</code></pre>
<pre><code>##   cyl   wt
## 1   4 2.28
## 2   6 3.11
## 3   8 4.00</code></pre>
<pre class="r"><code>p + 
  geom_hline(mapping = aes(x = cyl, yintercept = wt), 
             data = mean_wt)</code></pre>
<pre><code>## Warning: Ignoring unknown aesthetics: x</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-3-7.png" width="672" /></p>
<pre class="r"><code>##å¦‚æœä¸ä½¿ç”¨ç¾å­¦å¯¹è±¡,åˆ™åœ¨æ¯ä¸€ä¸ªåˆ†é¢ä¸Šéƒ½æ˜¯ä¸€æ ·çš„
p +
  geom_hline(yintercept = mean_wt$wt)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-3-8.png" width="672" /></p>
<pre class="r"><code># æ§åˆ¶å…¶ä»–ç¾å­¦å¯¹è±¡
ggplot(mtcars, aes(mpg, wt, colour = wt)) +
  geom_point() +
  geom_hline(aes(yintercept = wt, colour = wt), mean_wt) +
  facet_wrap(~ cyl)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-3-9.png" width="672" /></p>
<hr />
</div>
</div>
<div id="æŸ±å½¢å›¾bar-chartsgeom_bargeom_colå’Œstat_count" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> æŸ±å½¢å›¾(bar charts)<code>geom_bar()</code>,<code>geom_col()</code>å’Œ<code>stat_count</code></h2>
<p>ä¸€å…±æœ‰ä¸¤ç§ç±»å‹çš„å‡½æ•°ç”¨æ¥ç»˜åˆ¶æŸ±å½¢å›¾:<code>geom_bar()</code>å’Œ<code>geom_col()</code>å‡½æ•°.<code>geom_bar()</code>é…å¯¹çš„ç»Ÿè®¡è½¬æ¢å‡½æ•°ä¸º<code>stat_count()</code>å‡½æ•°,æ‰€ä»¥ä»–ä¼šè‡ªåŠ¨å°†æ¯ä¸ªgroupçš„caseä¸ªæ•°è®¡ç®—å‡ºæ¥,ç„¶åè½¬ä¸ºæ–°çš„data frame,ä¹Ÿå°±æ˜¯groupå’Œæ•°ç›®,ç„¶åæ˜ å°„åˆ°xå’Œyè½´ä¸Š.è€Œ<code>geom_bar()</code>åˆ™å’ŒR baseçš„bar plotå‡½æ•°ç›¸ä¼¼(é»˜è®¤é…å¯¹ç»Ÿè®¡è½¬æ¢å‡½æ•°ä¸º<code>stat_identify()</code>å‡½æ•°),éœ€è¦æŒ‡å®šxå’Œyè½´å˜é‡,ç„¶åç›´æ¥å°†æŒ‡å®šçš„yè½´å˜é‡æ˜ å°„ä¸ºbarçš„é«˜åº¦.</p>
<pre><code>geom_bar(mapping = NULL, data = NULL, stat = &quot;count&quot;,
  position = &quot;stack&quot;, ..., width = NULL, binwidth = NULL,
  na.rm = FALSE, show.legend = NA, inherit.aes = TRUE)

geom_col(mapping = NULL, data = NULL, position = &quot;stack&quot;, ...,
  width = NULL, na.rm = FALSE, show.legend = NA,
  inherit.aes = TRUE)

stat_count(mapping = NULL, data = NULL, geom = &quot;bar&quot;,
  position = &quot;stack&quot;, ..., width = NULL, na.rm = FALSE,
  show.legend = NA, inherit.aes = TRUE)</code></pre>
<div id="å‚æ•°-4" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> å‚æ•°</h3>
<ul>
<li><p><strong>mapping</strong> ç¾å­¦æ˜ å°„,ä½¿ç”¨<code>aes()</code>å‡½æ•°è®¾ç½®.å¦‚æœè®¾ç½®å‚æ•°<code>inherit.aes = TRUE</code>(é»˜è®¤),åˆ™è¯¥å›¾å±‚ä¼šä»<code>ggplot()</code>å‡½æ•°ç»§æ‰¿ç¾å­¦æ˜ å°„çš„å‚æ•°.</p></li>
<li><p><strong>data</strong> ç”¨äºåˆ›å»ºè¯¥å›¾å±‚çš„æ•°æ®.æœ‰ä¸‰ç§é€‰æ‹©: 1)å¦‚æœè®¾ç½®ä¸º<code>NULL</code>,ä¹Ÿæ˜¯é»˜è®¤è®¾ç½®.åˆ™è¯¥æ•°æ®ç»§æ‰¿è‡ª<code>ggplot()</code>å‡½æ•°ä¸­çš„æ•°æ®.2)ä¸€ä¸ª<code>data.frame</code>,æˆ–è€…å…¶ä»–çš„å¯¹è±¡,å¦‚<code>tibble</code>,è¿™å°†ä¼šè¦†ç›–<code>ggplot()</code>ä¸­çš„æ•°æ®.3)ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª<code>function()</code>,ä½†æ˜¯è¯¥functionæœ€åè¿”å›çš„å¯¹è±¡åº”è¯¥æ˜¯<code>data.frame</code>.<code>function</code>å¯ä»¥ä½¿ç”¨<code>formula</code>æ ¼å¼è¿›è¡Œåˆ›å»º,å¦‚:<code>head(.x, 10)</code></p></li>
<li><p><strong>position</strong> ä½ç½®è°ƒæ•´(position adjustment).å¯ä»¥æ˜¯å­—ç¬¦,ä¹Ÿå¯ä»¥æ˜¯ä½¿ç”¨ä½ç½®è°ƒæ•´å‚æ•°è¿”å›çš„å¯¹è±¡.</p></li>
<li><p><strong>â€¦</strong> å…¶ä»–çš„å¯ä»¥ä¼ å…¥<code>layer()</code>çš„å‚æ•°.ä¸€èˆ¬æ˜¯ç¾å­¦å¯¹è±¡,å¦‚<code>colour = "red"</code>æˆ–è€…<code>size = 3</code>.ä¹Ÿå¯ä»¥æ˜¯ä¸€äº›ä¸€äº›èƒ½å¤Ÿä¼ å…¥åˆ°å’Œ<code>geom_</code>é…å¯¹çš„geom/statçš„å‚æ•°.</p></li>
<li><p><strong>width</strong> æŸ±å½¢å›¾çš„å®½åº¦. é»˜è®¤è®¾ç½®ä¸ºæ•°æ®â€œåˆ†è¾¨ç‡â€çš„90%(0.9).</p></li>
<li><p><strong>na.rm</strong> é»˜è®¤ä¸º<code>FALSE</code>, missing valueä¼šè¢«å»é™¤æ‰,ä½†æ˜¯ä¼šç»™å‡º<code>warning</code>,å¦‚æœè®¾ç½®ä¸º<code>TRUE</code>,missing valueä¹Ÿä¼šè¢«å»é™¤æ‰,ä½†æ˜¯ä¸ä¼šç»™<code>warning</code>.</p></li>
<li><p><strong>show.legend</strong> è¯¥å›¾å±‚æ˜¯å¦è¦æ˜¾ç¤ºåœ¨legendä¸Š.é»˜è®¤ä¸º<code>NA</code>,åˆ™è¯¥å›¾å±‚ä¸­æ‰€æœ‰çš„æ˜ å°„åˆ°å›¾å½¢å±æ€§çš„å˜é‡éƒ½ä¼šæ˜¾ç¤ºåœ¨legendä¸­.<code>FALSE</code>åˆ™æ°¸è¿œä¸æ˜¾ç¤º,<code>TRUE</code>åˆ™æ°¸è¿œæ˜¾ç¤º.å¦‚æœè¯¥å›¾å½¢æœ‰å¤šä¸ªå˜é‡æ˜ å°„åˆ°ä¸åŒçš„å›¾å½¢å±æ€§,åˆ™å¯ä»¥å°†å…¶è®¾ç½®ä¸ºä¸€ä¸ªvector,åˆ†åˆ«æ§åˆ¶ä¸åŒçš„å˜é‡æ˜¯å¦æ˜¾ç¤º.</p></li>
<li><p><strong>inherit.aes</strong> å¦‚æœè®¾ç½®ä¸º<code>FALSE</code>,è¦†ç›–æ‰è€Œä¸æ˜¯ç»“åˆé»˜è®¤ç¾å­¦å‚æ•°. This is most useful for helper functions that define both data and aesthetics and shouldnâ€™t inherit behaviour from the default plot specification, e.g.Â borders().ä¸å¤ªæ˜ç™½è¿™ä¸ªæ„æ€?</p></li>
<li><p><strong>geom, stat</strong> è¦†ç›–æ‰é»˜è®¤çš„<code>geom_()</code>å’Œ<code>stat_()</code>å‡½æ•°.</p></li>
</ul>
</div>
<div id="ç»†èŠ‚-3" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> ç»†èŠ‚</h3>
<p>æŸ±å½¢å›¾ä½¿ç”¨é«˜åº¦æ¥è¡¨ç¤ºæ•°å€¼.æ‰€ä»¥ä¸€èˆ¬æŸ±å½¢å›¾æ˜¯ç”¨æ¥è¿›è¡Œå¯¹æ¯”å±•ç¤ºçš„.è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¦‚æœä½ å°†æ•°æ®logä¹‹å,ä½¿ç”¨æŸ±å½¢å›¾å°±ä¸å¤ªåˆé€‚.</p>
<p>é»˜è®¤,å¯¹äºåŒä¸ªxè½´ä½ç½®æœ‰ç€å¤šä¸ªæŸ±å­,åˆ™ä»–ä»¬ä¼šå †ç§¯åœ¨ä¸€èµ·.ä¹Ÿå°±è¾“å †ç§¯æŸ±å½¢å›¾,è¿™æ˜¯ç”±é»˜è®¤çš„ä½ç½®è°ƒæ•´å‡½æ•°<code>position_stack()</code>å®ç°çš„.å¦‚æœä½ æƒ³è¦è®©ä»–ä»¬å¹¶æ’æ’åˆ—,åˆ™éœ€è¦ä½¿ç”¨<code>position_dodge()</code>æˆ–è€…<code>position_dodge2()</code>å‡½æ•°.å½“ç„¶,å¦‚æœä½ æƒ³è¦å †å æŸ±å½¢å›¾,è€Œæ˜¾ç¤ºçš„æ˜¯æ¯”ä¾‹è€Œä¸æ˜¯çœŸå®æ•°å€¼,åˆ™éœ€è¦ä½¿ç”¨<code>position_fill()</code>å‡½æ•°.</p>
</div>
<div id="ç¾å­¦å‚æ•°aesthetics" class="section level3" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> ç¾å­¦å‚æ•°(Aesthetics)</h3>
<p><code>geom_bar()</code>å¯ä»¥æ¥å—ä»¥ä¸‹ç¾å­¦å‚æ•°(ç²—ä½“ä¸ºå¿…é¡»å‚æ•°).</p>
<ul>
<li><p><strong>x</strong></p></li>
<li><p><strong>y</strong></p></li>
<li><p>alpha</p></li>
<li><p>colour</p></li>
<li><p>fill</p></li>
<li><p>group</p></li>
<li><p>linetype</p></li>
<li><p>size</p></li>
</ul>
<p><code>geom_col()</code>å¯ä»¥æ¥å—ä»¥ä¸‹ç¾å­¦å‚æ•°(ç²—ä½“ä¸ºå¿…é¡»å‚æ•°).</p>
<ul>
<li><p><strong>x</strong></p></li>
<li><p><strong>y</strong></p></li>
<li><p>alpha</p></li>
<li><p>colour</p></li>
<li><p>fill</p></li>
<li><p>group</p></li>
<li><p>linetype</p></li>
<li><p>size</p></li>
</ul>
<p><code>stat_count()</code>å¯ä»¥æ¥å—ä»¥ä¸‹ç¾å­¦å‚æ•°(ç²—ä½“ä¸ºå¿…é¡»å‚æ•°).</p>
<ul>
<li><p><strong>x</strong></p></li>
<li><p>y</p></li>
<li><p>group</p></li>
<li><p>weight</p></li>
</ul>
</div>
<div id="è®¡ç®—å˜é‡-computed-variables" class="section level3" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> è®¡ç®—å˜é‡ (Computed variables)</h3>
<ul>
<li><p><strong>count</strong> æ¯ä¸€ä¸ªgrouä¸­çš„æ•°ç›®</p></li>
<li><p><strong>prop</strong> æ¯ç»„çš„æ¯”ä¾‹</p></li>
</ul>
</div>
<div id="ä¾‹å­-3" class="section level3" number="2.2.5">
<h3><span class="header-section-number">2.2.5</span> ä¾‹å­</h3>
<pre class="r"><code>library(ggplot2)
## é¦–å…ˆåˆ›å»ºä¸€ä¸ªggplot2å¯¹è±¡
g &lt;- ggplot(mpg, aes(class))
# ç„¶åä½¿ç”¨geom_baræ¥å±•ç¤ºæ¯ä¸ªclassçš„caseçš„æ•°ç›®
g + geom_bar()</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code># å¯ä»¥é€šè¿‡è®¾ç½®weightå‚æ•°,å°†æ¯ä¸ªæŸ±å­çš„é«˜åº¦æ”¹ä¸ºè¯¥å˜é‡çš„å’Œ
g + geom_bar(aes(weight = displ))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-4-2.png" width="672" /></p>
<pre class="r"><code># å½“æ¯ä¸€ä¸ªæŸ±å­åˆå¯ä»¥åˆ†ä¸ºä¸åŒçš„groupæ—¶,é»˜è®¤æ˜¯å †ç§¯åœ¨ä¸€èµ·çš„.
g + geom_bar(aes(fill = drv))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-4-3.png" width="672" /></p>
<pre class="r"><code># å¦‚æœæƒ³è¦ç¿»è½¬ç±»åˆ«çš„é¡ºåº,å¯ä»¥åœ¨positionå‚æ•°ä¸­è®¾ç½®
g +
 geom_bar(aes(fill = drv), 
          position = position_stack(reverse = TRUE)) +
 coord_flip() +
 theme(legend.position = &quot;top&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-4-4.png" width="672" /></p>
<pre class="r"><code># å¦‚æœåªæ˜¯æƒ³è¦æŸ±å­é«˜åº¦æ˜¾ç¤ºæŸä¸ªå˜é‡çš„å€¼,ä½¿ç”¨geom_colå‡½æ•°
df &lt;- data.frame(trt = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;), outcome = c(2.3, 1.9, 3.2))
ggplot(df, aes(trt, outcome)) +
  geom_col()</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-4-5.png" width="672" /></p>
<pre class="r"><code># å½“ç„¶,geom_barå‡½æ•°ä¹Ÿå¯ä»¥ç”¨æ¥æ˜¾ç¤ºè¿ç»­æ€§çš„å˜é‡
df &lt;- data.frame(x = rep(c(2.9, 3.1, 4.5), c(5, 10, 4)))
ggplot(df, aes(x)) + geom_bar()</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-4-6.png" width="672" /></p>
<pre class="r"><code># cf. a histogram of the same data
ggplot(df, aes(x)) + geom_histogram(binwidth = 0.5)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-4-7.png" width="672" /></p>
</div>
</div>
<div id="äºŒç»´æ–¹æ ¼è®¡æ•°çƒ­å›¾heatmap-of-2d-bin-countsgeom_bin2då’Œstat_bin_2d" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> äºŒç»´æ–¹æ ¼è®¡æ•°çƒ­å›¾(Heatmap of 2d bin counts)<code>geom_bin2d()</code>å’Œ<code>stat_bin_2d()</code></h2>
<p>å°†å¹³é¢åˆ’åˆ†ä¸ºæ”¾ä¸ª,ç„¶åè®¡ç®—æ¯ä¸ªæ–¹æ ¼ä¸­caseçš„æ•°ç›®,ç„¶åå°†å°æ–¹æ ¼å†…çš„caseçš„æ•°ç›®æ˜ å°„åˆ°å°æ–¹æ ¼çš„å¡«å……é¢œè‰²ä¸Š(é»˜è®¤).è¿™ç§ä½œå›¾æ–¹æ³•ä¸<code>geom_point()</code>ç›¸æ¯”,å¥½å¤„æ˜¯å¯ä»¥æœ‰æ•ˆçš„é¿å…é‡å .</p>
<pre><code>geom_bin2d(mapping = NULL, data = NULL, stat = &quot;bin2d&quot;,
  position = &quot;identity&quot;, ..., na.rm = FALSE, show.legend = NA,
  inherit.aes = TRUE)

stat_bin_2d(mapping = NULL, data = NULL, geom = &quot;tile&quot;,
  position = &quot;identity&quot;, ..., bins = 30, binwidth = NULL,
  drop = TRUE, na.rm = FALSE, show.legend = NA, inherit.aes = TRUE)</code></pre>
<div id="å‚æ•°-5" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> å‚æ•°</h3>
<ul>
<li><p><strong>mapping</strong> ç¾å­¦æ˜ å°„å‚æ•°,ä½¿ç”¨<code>aes()</code>å»ºç«‹.å¦‚æœåœ¨è¯¥å›¾å±‚è¿›è¡Œè®¾ç½®,å¹¶ä¸”<code>inherit.aes = TRUE</code>(é»˜è®¤), it is combined with the default mapping at the top level of the plot. You must supply mapping if there is no plot mapping?</p></li>
<li><p><strong>data</strong> ç”¨äºåˆ›å»ºè¯¥å›¾å±‚çš„æ•°æ®.æœ‰ä¸‰ç§é€‰æ‹©: 1)å¦‚æœè®¾ç½®ä¸º<code>NULL</code>,ä¹Ÿæ˜¯é»˜è®¤è®¾ç½®.åˆ™è¯¥æ•°æ®ç»§æ‰¿è‡ª<code>ggplot()</code>å‡½æ•°ä¸­çš„æ•°æ®.2)ä¸€ä¸ª<code>data.frame</code>,æˆ–è€…å…¶ä»–çš„å¯¹è±¡,å¦‚<code>tibble</code>,è¿™å°†ä¼šè¦†ç›–<code>ggplot()</code>ä¸­çš„æ•°æ®.3)ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª<code>function()</code>,ä½†æ˜¯è¯¥functionæœ€åè¿”å›çš„å¯¹è±¡åº”è¯¥æ˜¯<code>data.frame</code>.<code>function</code>å¯ä»¥ä½¿ç”¨<code>formula</code>æ ¼å¼è¿›è¡Œåˆ›å»º,å¦‚:<code>head(.x, 10)</code></p></li>
<li><p><strong>position</strong> ä½ç½®è°ƒæ•´(position adjustment).å¯ä»¥æ˜¯å­—ç¬¦,ä¹Ÿå¯ä»¥æ˜¯ä½¿ç”¨ä½ç½®è°ƒæ•´å‚æ•°è¿”å›çš„å¯¹è±¡.</p></li>
<li><p><strong>â€¦</strong> å…¶ä»–çš„å¯ä»¥ä¼ å…¥<code>layer()</code>çš„å‚æ•°.ä¸€èˆ¬æ˜¯ç¾å­¦å¯¹è±¡,å¦‚<code>colour = "red"</code>æˆ–è€…<code>size = 3</code>.ä¹Ÿå¯ä»¥æ˜¯ä¸€äº›ä¸€äº›èƒ½å¤Ÿä¼ å…¥åˆ°å’Œ<code>geom_</code>é…å¯¹çš„geom/statçš„å‚æ•°.</p></li>
<li><p><strong>na.rm</strong> é»˜è®¤ä¸º<code>FALSE</code>, missing valueä¼šè¢«å»é™¤æ‰,ä½†æ˜¯ä¼šç»™å‡º<code>warning</code>,å¦‚æœè®¾ç½®ä¸º<code>TRUE</code>,missing valueä¹Ÿä¼šè¢«å»é™¤æ‰,ä½†æ˜¯ä¸ä¼šç»™<code>warning</code>.</p></li>
<li><p><strong>show.legend</strong> è¯¥å›¾å±‚æ˜¯å¦è¦æ˜¾ç¤ºåœ¨legendä¸Š.é»˜è®¤ä¸º<code>NA</code>,åˆ™è¯¥å›¾å±‚ä¸­æ‰€æœ‰çš„æ˜ å°„åˆ°å›¾å½¢å±æ€§çš„å˜é‡éƒ½ä¼šæ˜¾ç¤ºåœ¨legendä¸­.<code>FALSE</code>åˆ™æ°¸è¿œä¸æ˜¾ç¤º,<code>TRUE</code>åˆ™æ°¸è¿œæ˜¾ç¤º.å¦‚æœè¯¥å›¾å½¢æœ‰å¤šä¸ªå˜é‡æ˜ å°„åˆ°ä¸åŒçš„å›¾å½¢å±æ€§,åˆ™å¯ä»¥å°†å…¶è®¾ç½®ä¸ºä¸€ä¸ªvector,åˆ†åˆ«æ§åˆ¶ä¸åŒçš„å˜é‡æ˜¯å¦æ˜¾ç¤º.</p></li>
<li><p><strong>inherit.aes</strong> å¦‚æœè®¾ç½®ä¸º<code>FALSE</code>,è¦†ç›–æ‰è€Œä¸æ˜¯ç»“åˆé»˜è®¤ç¾å­¦å‚æ•°. This is most useful for helper functions that define both data and aesthetics and shouldnâ€™t inherit behaviour from the default plot specification, e.g.Â borders().ä¸å¤ªæ˜ç™½è¿™ä¸ªæ„æ€?</p></li>
<li><p><strong>geom, stat</strong> è¦†ç›–æ‰é»˜è®¤çš„<code>geom_()</code>å’Œ<code>stat_()</code>å‡½æ•°.</p></li>
<li><p><strong>bins</strong> æ•°å€¼å‹çš„å‘é‡,ç”¨æ¥åˆ†åˆ«è®¾ç½®å‚ç›´å’Œæ°´å¹³æ–¹å‘ä¸Šçš„binçš„æ•°ç›®,é»˜è®¤éƒ½æ˜¯30.</p></li>
<li><p><strong>binwidth</strong> æ•°å€¼å‹å‘é‡,ç”¨äºè®¾ç½®åœ¨å‚ç›´å’Œæ°´å¹³æ–¹å‘ä¸Šçš„binçš„å®½åº¦.å¦‚æœè¯¥å‚æ•°è®¾ç½®,åˆ™ä¼šè¦†ç›–æ‰binså‚æ•°.</p></li>
<li><p><strong>drop</strong> å¦‚æœè®¾ç½®ä¸º<code>TRUE</code>,åˆ™ä¼šå»é™¤æ‰countä¸º0çš„æ–¹æ ¼.</p></li>
</ul>
</div>
<div id="ç¾å­¦å‚æ•°asethetics" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> ç¾å­¦å‚æ•°(Asethetics)</h3>
<p><code>stat_bind2d()</code>æ¥å—ä»¥ä¸‹ç¾å­¦å‚æ•°(é»‘ä½“ä¸ºå¿…é¡»å‚æ•°):</p>
<ul>
<li><p><strong>x</strong></p></li>
<li><p><strong>y</strong></p></li>
<li><p>fill</p></li>
</ul>
<p>*group</p>
</div>
<div id="è®¡ç®—å˜é‡computed-variables" class="section level3" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> è®¡ç®—å˜é‡(Computed variables)</h3>
<ul>
<li><p><strong>count</strong> binä¸­çš„æ•°æ®ç‚¹çš„ä¸ªæ•°.</p></li>
<li><p><strong>density</strong> binä¸­æ•°æ®ç‚¹çš„å¯†åº¦(density),æ•´ä½“æ•°æ®ç‚¹æ•°ç›®ä¸º1,æ‰€æœ‰å…¶ä»–binå†…æ•°æ®ç‚¹æ•°ç›®ä¸ä¹‹scale.</p></li>
<li><p><strong>ncount</strong> count, scaled to maximum of 1?</p></li>
<li><p><strong>ndensity</strong> density, scaled to maximum of 1</p></li>
</ul>
</div>
<div id="ä¾‹å­-4" class="section level3" number="2.3.4">
<h3><span class="header-section-number">2.3.4</span> ä¾‹å­</h3>
<pre class="r"><code>library(ggplot2)
d &lt;- ggplot(diamonds, aes(x, y)) + 
  xlim(4, 10) + 
  ylim(4, 10)
d + geom_bin2d()</code></pre>
<pre><code>## Warning: Removed 478 rows containing non-finite values (stat_bin2d).</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
</div>
<div id="ç©ºç™½å›¾geom_blank" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> ç©ºç™½å›¾<code>geom_blank()</code></h2>
<p><code>geom_blank()</code>å‡½æ•°ä¸ç»˜åˆ¶ä»»ä½•ä¸œè¥¿,ä½†æ˜¯å¯ä»¥ç”¨æ¥ç»˜åˆ¶ä¸€ä¸ªç©ºçš„plotæ¥ä¿æŒä¸€å®šçš„åˆ»åº¦.</p>
<pre><code>geom_blank(mapping = NULL, data = NULL, stat = &quot;identity&quot;,
  position = &quot;identity&quot;, ..., show.legend = NA, inherit.aes = TRUE)</code></pre>
<div id="å‚æ•°-6" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> å‚æ•°</h3>
<p>æ‰€æœ‰å‚æ•°å¯ä»¥å‚è€ƒä¸Šé¢æ‰€æœ‰çš„å‡½æ•°.</p>
</div>
<div id="ä¾‹å­-5" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> ä¾‹å­</h3>
<pre class="r"><code>p &lt;- 
  ggplot(mtcars, aes(wt, mpg))
p</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code>p + 
  geom_blank()</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-6-2.png" width="672" /></p>
</div>
</div>
<div id="ç®±å‹å›¾boxplotæˆ–è€…whiskers-plotgeom_boxplotå’Œstat_boxplot" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> ç®±å‹å›¾(boxplotæˆ–è€…whiskers plot)<code>geom_boxplot()</code>å’Œ<code>stat_boxplot()</code></h2>
<p>ç®±å‹å›¾ç”¨æ¥å±•ç¤ºè¿ç»­æ€§å˜é‡çš„åˆ†å¸ƒ.å®ƒå¯ä»¥å±•ç¤º5ä¸ªç»Ÿè®¡é‡(ä¸­ä½å€¼,two hinges and two whiskers), ä»¥åŠæ‰€æœ‰çš„outlierå€¼.</p>
<pre><code>geom_boxplot(mapping = NULL, data = NULL, stat = &quot;boxplot&quot;,
  position = &quot;dodge2&quot;, ..., outlier.colour = NULL,
  outlier.color = NULL, outlier.fill = NULL, outlier.shape = 19,
  outlier.size = 1.5, outlier.stroke = 0.5, outlier.alpha = NULL,
  notch = FALSE, notchwidth = 0.5, varwidth = FALSE, na.rm = FALSE,
  show.legend = NA, inherit.aes = TRUE)

stat_boxplot(mapping = NULL, data = NULL, geom = &quot;boxplot&quot;,
  position = &quot;dodge2&quot;, ..., coef = 1.5, na.rm = FALSE,
  show.legend = NA, inherit.aes = TRUE)</code></pre>
<div id="å‚æ•°-7" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> å‚æ•°</h3>
<p><strong>mapping</strong>,<strong>data</strong>,<strong>position</strong>å’Œ<strong>â€¦</strong>å‚æ•°å¯ä»¥å‚è€ƒå‰é¢çš„å‚æ•°.éƒ½æ˜¯ä¸€è‡´çš„.</p>
<ul>
<li><p><strong>outlier.colour</strong>,<strong>outlier.fill</strong>,<strong>outlier.shape</strong>,<strong>outlier.size</strong>,<strong>outlier.stroke</strong>,<strong>outlier.alpha</strong>:ç¦»ç¾¤ç‚¹çš„ç¾å­¦å‚æ•°.å¦‚æœæƒ³è¦éšè—outlier,åˆ™å¯ä»¥å°†<strong>outlier.shape</strong>è®¾ç½®ä¸ºNA.</p></li>
<li><p><strong>notch</strong>:é»˜è®¤ä¸º<code>FALSE</code>,ä¸€ä¸ªæ ‡å‡†çš„box plot,å¦‚æœè®¾ç½®ä¸º<code>TRUE</code>,åˆ™æ˜¯ä¸€ä¸ªæœ‰ç¼ºå£çš„box plot.æœ‰ç¼ºå£çš„box plotå¯ä»¥æ–¹ä¾¿å¤šç»„æ•°æ®è¿›è¡Œæ¯”è¾ƒ.å› ä¸ºç¼ºå£å¤„å°±æ˜¯ä¸­ä½å€¼æ‰€åœ¨ä½ç½®.</p></li>
<li><p><strong>notchwidth</strong>:ç¼ºå£box plotçš„ç¼ºå£å¤„çš„å®½åº¦å’Œæ•´ä½“å®½åº¦çš„æ¯”å€¼,é»˜è®¤ä¸º0.5.</p></li>
<li><p><strong>varwidth</strong>:é»˜è®¤ä¸º<code>FALSE</code>,ä¸€ä¸ªæ ‡å‡†çš„box plot.å¦‚æœè®¾ç½®ä¸º<code>TRUE</code>,åˆ™æ¯ç»„çš„boxçš„å®½åº¦å’Œè¯¥ç»„çš„å˜é‡çš„ä¸ªæ•°çš„å¹³æ–¹æ ¹æˆæ­£æ¯”.</p></li>
<li><p><strong>coef</strong>:é»˜è®¤ä¸º1.5.ä¹Ÿå°±æ˜¯ä¸Šä¸‹è¾¹æ¡†æ‰©å±•å‡ºçš„ä¸Šä¸‹æ™¶é¡»çš„è·ç¦»ä¸º1.5å€çš„IQR.</p></li>
</ul>
</div>
<div id="ç»Ÿè®¡æ€»ç»“" class="section level3" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> ç»Ÿè®¡æ€»ç»“</h3>
<p>box plotæ¡†çš„ä¸Šä¸‹è¾¹ç•Œ(hinge)åˆ†åˆ«ä»£è¡¨ç¬¬ä¸€å’Œç¬¬ä¸‰åˆ†ä½æ•°.</p>
<p>ä»æ¡†ä¸Šè¾¹ç•Œæ‰©å±•å‡ºçš„ä¸Šæ™¶é¡»(whisker)çš„è·ç¦»ä¸º1.5å€çš„IQR(IQRä¸ºinter quartile range,ä¹Ÿå°±æ˜¯ç¬¬ä¸‰åˆ†ä½æ•°å’Œç¬¬ä¸€ä»½ä½æ•°ä¹‹å·®).ä»æ¡†ä¸‹è¾¹ç•Œæ‰©å±•å‡ºçš„ä¸‹æ™¶é¡»(whisker)çš„è·ç¦»ä¸º1.5å€çš„IQR.åœ¨ä¸Šä¸‹æ™¶é¡»èŒƒå›´ä»¥å¤–çš„,å°±æ˜¯outlier.</p>
</div>
<div id="ç¾å­¦å‚æ•°" class="section level3" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> ç¾å­¦å‚æ•°</h3>
<p><code>geom_boxplot()</code>æ¥æ”¶ä»¥ä¸‹ç¾å­¦å‚æ•°(é»‘ä½“ä¸ºå¿…é¡»å‚æ•°):</p>
<ul>
<li><p><strong>x</strong></p></li>
<li><p><strong>lower</strong></p></li>
<li><p><strong>upper</strong></p></li>
<li><p><strong>umiddle</strong></p></li>
<li><p><strong>ymin</strong></p></li>
<li><p><strong>yax</strong></p></li>
<li><p>alpha</p></li>
<li><p>colour</p></li>
<li><p>fill</p></li>
<li><p>group</p></li>
<li><p>linetype</p></li>
<li><p>shape</p></li>
<li><p>size</p></li>
<li><p>weight</p></li>
</ul>
</div>
<div id="è®¡ç®—å˜é‡" class="section level3" number="2.5.4">
<h3><span class="header-section-number">2.5.4</span> è®¡ç®—å˜é‡</h3>
<ul>
<li>width box plotå®½åº¦.</li>
</ul>
<p>ymin:ä¸‹æ™¶é¡»==ä¸‹æ¡†è¾¹ç•Œ-1.5*IQR</p>
<p>lower:ä¸‹æ¡†è¾¹ç•Œ.é»˜è®¤ä¸º25% quantile.</p>
<p>notchlower:å¯¹äºæœ‰ç¼ºå£box plotçš„ä¸‹æ¡†è¾¹ç•Œ.é»˜è®¤ä¸ºmedian - 1.58 * IQR / sqrt(n)</p>
<p>middle:ä¸­ä½å€¼,é»˜è®¤ä¸º50%åˆ†ä½æ•°.</p>
<p>notchupper:å¯¹äºæœ‰ç¼ºå£box plotçš„ä¸Šæ¡†è¾¹ç•Œ.é»˜è®¤ä¸ºmedian + 1.58 * IQR / sqrt(n)</p>
<p>upper:ä¸Šæ¡†è¾¹ç•Œ,é»˜è®¤ä¸º75%åˆ†ä½æ•°.</p>
<p>ymaxä¸Šæ™¶é¡»==ä¸Šæ¡†è¾¹ç•Œ+1.5*IQR</p>
</div>
<div id="ä¾‹å­-6" class="section level3" number="2.5.5">
<h3><span class="header-section-number">2.5.5</span> ä¾‹å­</h3>
<pre class="r"><code>library(ggplot2)
p &lt;- ggplot(mpg, aes(class, hwy))

p +
    geom_boxplot()  </code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<pre class="r"><code># äº¤æ¢xè½´å’Œyè½´
p + geom_boxplot() + 
  coord_flip()</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-2.png" width="672" /></p>
<pre class="r"><code># æœ‰ç¼ºå£çš„box plot,æ³¨æ„æ­¤æ—¶ä¸Šä¸‹æ™¶é¡»è·ç¦»æ˜¯æœ‰å˜åŒ–çš„.
p +
  geom_boxplot(notch = TRUE)</code></pre>
<pre><code>## notch went outside hinges. Try setting notch=FALSE.
## notch went outside hinges. Try setting notch=FALSE.</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-3.png" width="672" /></p>
<pre class="r"><code># boxå®½åº¦å’Œæ¯ç»„æ•°ç›®nçš„å¹³æ–¹æ ¹æˆæ­£æ¯”
p + geom_boxplot(varwidth = TRUE)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-4.png" width="672" /></p>
<pre class="r"><code>p + geom_boxplot(fill = &quot;white&quot;, colour = &quot;#3366FF&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-5.png" width="672" /></p>
<pre class="r"><code># è®¾ç½®outlierçš„ç¾å­¦å‚æ•°
p + geom_boxplot(outlier.colour = &quot;red&quot;, outlier.shape = 1)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-6.png" width="672" /></p>
<pre class="r"><code># å°†ç‚¹å’Œboxplotç”»åœ¨ä¸€èµ·,è¿™æ—¶å€™éœ€è¦æŠŠoutlierå»é™¤æ‰,å› ä¸ºå’ŒåŸå§‹ç‚¹ä¼šæœ‰é‡å 
p + geom_boxplot(outlier.shape = NA) + 
  geom_jitter(width = 0.2)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-7.png" width="672" /></p>
<pre class="r"><code># å¦‚æœæ¯ç»„çš„box plotå†åˆ†ç±»,åˆ™é»˜è®¤æ˜¯å¹¶åˆ—æ’åœ¨ä¸€èµ·çš„
p + geom_boxplot(aes(colour = drv))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-8.png" width="672" /></p>
<pre class="r"><code># xè½´ä¸æ˜¯åˆ†ç±»æ•°æ®,è€Œæ˜¯è¿ç»­æ•°æ®ä¹Ÿæ˜¯å¯ä»¥çš„.ä½†æ˜¯éœ€è¦æä¾›å¦‚ä½•å¯¹xè½´è¿›è¡Œåˆ†ç±»,æ¯”å¦‚é€šè¿‡
#cut_widthå‡½æ•°å°†è¿ç»­æ€§å˜é‡è¿›è¡Œåˆ†ç±»
ggplot(diamonds, aes(x = carat, y = price)) +
  geom_boxplot()</code></pre>
<pre><code>## Warning: Continuous x aesthetic -- did you forget aes(group=...)?</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-9.png" width="672" /></p>
<pre class="r"><code>ggplot(diamonds, aes(carat, price)) +
  geom_boxplot(aes(colour = cut_width(carat, 0.25)), show.legend = FALSE)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-10.png" width="672" /></p>
<pre class="r"><code>ggplot(diamonds, aes(carat, price)) +
  geom_boxplot(aes(group = cut_width(carat, 0.25)), show.legend = FALSE)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-11.png" width="672" /></p>
<pre class="r"><code># å¦‚æœä½ è‡ªå·±å®šä¹‰äº†boxplotçš„å„ä¸ªå…ƒç´ ,ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®stat=`identify`æ¥ç”»boxplot
y &lt;- rnorm(100)
df &lt;- data.frame(
  x = 1,
  y0 = min(y),
  y25 = quantile(y, 0.25),
  y50 = median(y),
  y75 = quantile(y, 0.75),
  y100 = max(y)
)
ggplot(df, aes(x)) +
  geom_boxplot(
   aes(ymin = y0, lower = y25, middle = y50, upper = y75, ymax = y100),
   stat = &quot;identity&quot;
 )</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-12.png" width="672" /></p>
</div>
</div>
<div id="dè¡¨é¢çš„2dç­‰é«˜çº¿contoursgeom_contourå’Œstat_contour" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> 3Dè¡¨é¢çš„2Dç­‰é«˜çº¿(contours)<code>geom_contour()</code>å’Œ<code>stat_contour()</code></h2>
<p><code>ggplot2</code>å¹¶ä¸èƒ½ç”»3Då›¾å½¢,ä½†æ˜¯å¯ä»¥ä½¿ç”¨<code>geom_contour()</code>å’Œ<code>geom_tile()</code>(tileæ˜¯ç“·ç –çš„æ„æ€)ç”»ç­‰é«˜çº¿. To be a valid surface, the data must contain only a single row for each unique combination of the variables mapped to the x and y aesthetics. Contouring tends to work best when x and y form a (roughly) evenly spaced grid. If your data is not evenly spaced, you may want to interpolate to a grid before visualising.</p>
<pre><code>geom_contour(mapping = NULL, data = NULL, stat = &quot;contour&quot;,
  position = &quot;identity&quot;, ..., lineend = &quot;butt&quot;, linejoin = &quot;round&quot;,
  linemitre = 10, na.rm = FALSE, show.legend = NA,
  inherit.aes = TRUE)

stat_contour(mapping = NULL, data = NULL, geom = &quot;contour&quot;,
  position = &quot;identity&quot;, ..., na.rm = FALSE, show.legend = NA,
  inherit.aes = TRUE)</code></pre>
<div id="å‚æ•°-8" class="section level3" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> å‚æ•°</h3>
<p>å¾ˆå¤šå‚æ•°è·Ÿå‰é¢æ˜¯ä¸€æ ·çš„.å…¶ä»–ä¸åŒçš„è§ä¸‹:</p>
<ul>
<li><p><strong>lineend</strong> çº¿æ¡æœ«ç«¯çš„å½¢å¼(round, butt, square)</p></li>
<li><p><strong>linejoin</strong> çº¿æ¡äº¤ç•Œå¤„çš„å½¢å¼(round, butt, square)</p></li>
<li><p><strong>linemitre</strong> Line mitre limit (number greater than 1).</p></li>
</ul>
</div>
<div id="ç¾å­¦å‚æ•°-1" class="section level3" number="2.6.2">
<h3><span class="header-section-number">2.6.2</span> ç¾å­¦å‚æ•°</h3>
<p><code>geom_contour()</code>æ¥å—ä»¥ä¸‹å‚æ•°(é»‘ä½“ä¸ºå¿…é¡»å‚æ•°):</p>
<ul>
<li><p><strong>x</strong></p></li>
<li><p><strong>y</strong></p></li>
<li><p>alpha</p></li>
<li><p>colour</p></li>
<li><p>group</p></li>
<li><p>linetype</p></li>
<li><p>size</p></li>
<li><p>weight</p></li>
</ul>
<p><code>stat_contour()</code>æ¥å—ä»¥ä¸‹å‚æ•°(é»‘ä½“ä¸ºå¿…é¡»å‚æ•°):</p>
<ul>
<li><p><strong>x</strong></p></li>
<li><p><strong>y</strong></p></li>
<li><p>z</p></li>
<li><p>group</p></li>
<li><p>order</p></li>
</ul>
</div>
<div id="è®¡ç®—å˜é‡-1" class="section level3" number="2.6.3">
<h3><span class="header-section-number">2.6.3</span> è®¡ç®—å˜é‡</h3>
<ul>
<li><p>level:ç­‰é«˜çº¿çš„é«˜åº¦</p></li>
<li><p>nlevel:ç­‰é«˜çº¿çš„é«˜åº¦,æœ€å¤§å€¼scaleåˆ°1.</p></li>
<li><p>piece:contour piece (æ•´æ•°).</p></li>
</ul>
</div>
<div id="ä¾‹å­-7" class="section level3" number="2.6.4">
<h3><span class="header-section-number">2.6.4</span> ä¾‹å­</h3>
<pre class="r"><code># åŸºç¡€å›¾å½¢
library(ggplot2)
## å…ˆçœ‹çœ‹æ•°æ®
head(faithfuld)</code></pre>
<pre><code>## # A tibble: 6 x 3
##   eruptions waiting density
##       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1      1.6       43 0.00322
## 2      1.65      43 0.00384
## 3      1.69      43 0.00444
## 4      1.74      43 0.00498
## 5      1.79      43 0.00542
## 6      1.84      43 0.00574</code></pre>
<pre class="r"><code>v &lt;- ggplot(faithfuld, aes(waiting, eruptions, z = density))
v + geom_contour()</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code># ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®å‚æ•°bins,æ¥ç¡®å®šæœ‰å‡ ä¸ªç­‰é«˜çº¿.
v + geom_contour(bins = 2)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-2.png" width="672" /></p>
<pre class="r"><code>v + geom_contour(bins = 10)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-3.png" width="672" /></p>
<pre class="r"><code># å½“ç„¶,ä¹Ÿå¯ä»¥è®¾ç½®ç­‰é«˜çº¿ä¹‹é—´çš„è·ç¦»
v + geom_contour(binwidth = 0.01)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-4.png" width="672" /></p>
<pre class="r"><code>v + geom_contour(binwidth = 0.001)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-5.png" width="672" /></p>
<pre class="r"><code># å…¶ä»–çš„å‚æ•°
##levelå°±æ˜¯stat_contourçš„å…¶ä¸­ä¸€ä¸ªè®¡ç®—å˜é‡,level.
v + geom_contour(aes(colour = ..level..))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-6.png" width="672" /></p>
<pre class="r"><code>##ä¸‹é¢ä¸ä¸Šé¢ç›¸åŒ.
v + geom_contour(aes(colour = stat(level)))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-7.png" width="672" /></p>
<pre class="r"><code>v + geom_contour(colour = &quot;red&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-8.png" width="672" /></p>
<pre class="r"><code># geom_rectç”¨æ¥ç”»çŸ©å½¢

v + geom_raster(aes(fill = density)) +
  geom_contour(colour = &quot;white&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-9.png" width="672" /></p>
<pre class="r"><code>v + geom_raster(aes(fill = density)) +
  scale_fill_gradient(low = &quot;white&quot;, high = &quot;red&quot;) +
  geom_contour(colour = &quot;white&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-10.png" width="672" /></p>
</div>
</div>
</div>
<div id="å¸¸è§é—®é¢˜æ€»ç»“" class="section level1" number="3">
<h1><span class="header-section-number">3</span> å¸¸è§é—®é¢˜æ€»ç»“</h1>
<div id="å¦‚ä½•ä¿è¯ä¸åŒå›¾ä¸­legendçš„scaleä¸€è‡´" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> å¦‚ä½•ä¿è¯ä¸åŒå›¾ä¸­legendçš„scaleä¸€è‡´</h2>
<p>æ¯”å¦‚ä¸¤ä¸ªå›¾ä¸­,æˆ‘ä»¬æƒ³ä¿è¯legendå¯¹åº”çš„sizeçš„ç²—ç»†æ˜¯å’Œæ•°æ®ä¸€è‡´çš„.</p>
<pre class="r"><code>library(ggplot2)
library(tidyverse)
  data.frame(x = 1:5, y = 1:5) %&gt;% 
  ggplot() +
  geom_point(aes(x = x, y = y, size = x))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>ä½¿ç”¨<code>scale_size_...()</code>å‡½æ•°æ¥è¿›è¡Œè®¾ç½®.</p>
<pre class="r"><code>  data.frame(x = 1:5, y = 1:5) %&gt;% 
  ggplot() +
  geom_point(aes(x = x, y = y, size = x)) +
  scale_size_continuous(limits = c(1,5), range = c(1,5))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<pre class="r"><code>data.frame(x = 1:5, y = 1:5) %&gt;% 
  ggplot() +
  geom_point(aes(x = x, y = y, size = x)) +
  scale_size_continuous(limits = c(1,5), range = c(5,6))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-10-2.png" width="672" /></p>
<p>å…¶ä¸­å‚æ•°<code>limits</code>æ˜¯ä¸€ä¸ªä¸¤ä¸ªçš„æ•°å€¼vector,ç”¨æ¥è®¾ç½®æ˜¯æŒ‡çš„æœ€å°å’Œæœ€å¤§å€¼.è€Œå‚æ•°<code>range</code>ä¹Ÿæ˜¯ä¸€ä¸ªä¸¤ä¸ªæ•°å€¼çš„vector,ç”¨æ¥è®¾ç½®pointçš„sizeçš„æœ€å°å€¼å’Œæœ€å¤§å€¼.</p>
</div>
</div>

    </div>

    





<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/blog/">Blog</a>
  
</div>



<div class="share-box">
  <ul class="share">
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fjaspershen.github.io%2Fpost%2Fggplot2-cookbook%2F&amp;text=ggplot2&#43;cookbook" target="_blank" rel="noopener" class="share-btn-twitter" aria-label="twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fjaspershen.github.io%2Fpost%2Fggplot2-cookbook%2F&amp;t=ggplot2&#43;cookbook" target="_blank" rel="noopener" class="share-btn-facebook" aria-label="facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
        
      
      <li>
        <a href="mailto:?subject=ggplot2%20cookbook&amp;body=https%3A%2F%2Fjaspershen.github.io%2Fpost%2Fggplot2-cookbook%2F" target="_blank" rel="noopener" class="share-btn-email" aria-label="envelope">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fjaspershen.github.io%2Fpost%2Fggplot2-cookbook%2F&amp;title=ggplot2&#43;cookbook" target="_blank" rel="noopener" class="share-btn-linkedin" aria-label="linkedin-in">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="whatsapp://send?text=ggplot2&#43;cookbook%20https%3A%2F%2Fjaspershen.github.io%2Fpost%2Fggplot2-cookbook%2F" target="_blank" rel="noopener" class="share-btn-whatsapp" aria-label="whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https%3A%2F%2Fjaspershen.github.io%2Fpost%2Fggplot2-cookbook%2F&amp;title=ggplot2&#43;cookbook" target="_blank" rel="noopener" class="share-btn-weibo" aria-label="weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://jaspershen.github.io/"><img class="avatar mr-3 avatar-circle" src="/authors/admin/avatar_hu86242519a21313948ac7dc77e0a27da6_1568301_270x270_fill_q75_lanczos_center.jpg" alt="Xiaotao Shen"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://jaspershen.github.io/">Xiaotao Shen</a></h5>
      <h6 class="card-subtitle">Postdoctoral Research Fellow</h6>
      <p class="card-text">Metabolomics, Multi-omics, Bioinformatics, Systems Biology.</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/GeorgeCushen" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.co.uk/citations?user=sIwtMXoAAAAJ" target="_blank" rel="noopener">
        <i class="fas fa-graduation-cap"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/gcushen" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="/uploads/resume.pdf" >
        <i class="ai ai-cv"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>


















  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  












  
  
  
  
  













  
  
  

  
  
    
  
  
    
  

  

  
  <p class="powered-by copyright-license-text">
    Â© 2023 Xiaotao Shen
  </p>
  

  <p class="powered-by footer-license-icons">
    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank" aria-label="Creative Commons">
      <i class="fab fa-creative-commons fa-2x" aria-hidden="true"></i>
      <i class="fab fa-creative-commons-by fa-2x" aria-hidden="true"></i>
      
        <i class="fab fa-creative-commons-nc fa-2x" aria-hidden="true"></i>
      
      
        <i class="fab fa-creative-commons-nd fa-2x" aria-hidden="true"></i>
      
    </a>
  </p>





  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a> â€” the free, <a href="https://github.com/wowchemy/wowchemy-hugo-themes" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>

    </div>
    
  </div>

  


<script src="/js/vendor-bundle.min.f64289d8217e08e3afcd597d60836062.js"></script>




  

  
  

  













  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  












  
  
  
  
  
  
  







<script id="page-data" type="application/json">{"use_headroom":true}</script>



  <script src="/js/wowchemy-headroom.db4755770454eb63685f8de785c0a172.js" type="module"></script>









  
  


<script src="/en/js/wowchemy.min.ead4a376bcf2c4714888c770ea9b0040.js"></script>







  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
        <pre><code></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>


  <script src="/js/wowchemy-publication.68f8d7090562ca65fc6d3cb3f8f2d2cb.js" type="module"></script>


















</body>
</html>
